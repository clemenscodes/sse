"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[642],{1213:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>g,frontMatter:()=>t,metadata:()=>l,toc:()=>u});var s=i(4512),r=i(3250);const t={slug:"/features/login",label:"Features",sidebar_position:2},d="Anmeldung",l={unversionedId:"features/login",id:"features/login",title:"Anmeldung",description:"Validierung",source:"@site/src/features/login.mdx",sourceDirName:"features",slug:"/features/login",permalink:"/sse/en/features/login",draft:!1,unlisted:!1,editUrl:"https://github.com/clemenscodes/sse/edit/main/apps/notes/docs/src/features/login.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{slug:"/features/login",label:"Features",sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Registrierung",permalink:"/sse/en/features/registration"},next:{title:"Passwort vergessen",permalink:"/sse/en/features/password-reset"}},a={},u=[{value:"Validierung",id:"validierung",level:2},{value:"\xdcberpr\xfcfung der Anmeldedaten",id:"\xfcberpr\xfcfung-der-anmeldedaten",level:2},{value:"Erstellung der Session",id:"erstellung-der-session",level:2},{value:"Erstellung eines JWT",id:"erstellung-eines-jwt",level:2},{value:"Sicherheitsma\xdfnahmen",id:"sicherheitsma\xdfnahmen",level:2},{value:"Weiteres Vorgehen im Client",id:"weiteres-vorgehen-im-client",level:2}];function o(e){const n=Object.assign({h1:"h1",h2:"h2",p:"p",ul:"ul",li:"li"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"anmeldung",children:"Anmeldung"}),"\n",(0,s.jsx)(n.h2,{id:"validierung",children:"Validierung"}),"\n",(0,s.jsx)(n.p,{children:"F\xfcr die Anmeldung wird wie schon bei der Registrierung zod f\xfcr die Datenvalidierung verwendet.\nEs wird sich Benutzername und Passwort angemeldet. Erfolgt eine ung\xfcltige Dateneingabe, sei es clientseitig oder serverseitig, erh\xe4lt man eine Fehlermeldung, die nicht aussagekr\xe4ftig ist.\nDie Bedingungen f\xfcr die Datenvalidierung sind die identisch zur Registrierung f\xfcr den Benutzernamen und das Passwort."}),"\n",(0,s.jsx)(n.h2,{id:"\xfcberpr\xfcfung-der-anmeldedaten",children:"\xdcberpr\xfcfung der Anmeldedaten"}),"\n",(0,s.jsx)(n.p,{children:"Nach Eingabe der g\xfcltigen Anmeldedaten wird das Passwort \xfcberpr\xfcft, indem das Passwort mit dem selben Verfahren gehasht wird und mit dem gespeicherten Hashs des Benutzers verglichen wird.\nIst der Hash identisch, erfolgt die Erstellung der Session."}),"\n",(0,s.jsx)(n.h2,{id:"erstellung-der-session",children:"Erstellung der Session"}),"\n",(0,s.jsx)(n.p,{children:"F\xfcr die Session wird eine Session-ID mit Hilfe des UUIDv4-Verfahren erstellt.\nDies garantiert zuf\xe4llige, nicht-deterministische Session-IDs, um angemeldete Benutzer zu identifizieren.\nDie Session wird in der Datenbank gespeichert und mit einem Benutzer assoziiert.\nStandardm\xe4\xdfig ist eine Session eine Stunde g\xfcltig."}),"\n",(0,s.jsx)(n.p,{children:"Zus\xe4tzlich zur Session wird ebenfalls eine Auffrischungssession erstellt und mit dem Benutzer assoziiert,\nwelche 30 Tage g\xfcltig ist.\nIst die Session abgelaufen, wird die Auffrischungssession verwendet, und eine neue Session erstellt.\nNach 30 Tagen muss sich der Benutzer erneut anmelden."}),"\n",(0,s.jsx)(n.h2,{id:"erstellung-eines-jwt",children:"Erstellung eines JWT"}),"\n",(0,s.jsx)(n.p,{children:"Um die Last der Datenbank zu minimieren, wird zus\xe4tzlich Session ein JWT erstellt und mit dem Benutzer assoziiert."}),"\n",(0,s.jsx)(n.h2,{id:"sicherheitsma\xdfnahmen",children:"Sicherheitsma\xdfnahmen"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Die Session-IDs werden als sichere und signierte HTTP-Only Cookies an das Frontend zur\xfcckgesendet"}),"\n",(0,s.jsx)(n.li,{children:"Die enthalten die gleiche G\xfcltigkeitsdauer"}),"\n",(0,s.jsx)(n.li,{children:"Zus\xe4tzlich k\xf6nnen die Cookies nur von der selben Domain aus versendet werden"}),"\n",(0,s.jsx)(n.li,{children:"Das Signieren der Cookies erfolgt durch einen aus der Umgebung sicher ausgelesenen Schl\xfcssel"}),"\n",(0,s.jsx)(n.li,{children:"Die Cookies k\xf6nnen nur mit HTTPS versendet werden"}),"\n",(0,s.jsx)(n.li,{children:"Der JWT verwendet das Standardhashverfahren SHA-256"}),"\n",(0,s.jsx)(n.li,{children:"Der JWT ist ebenfalls nur eine Stunde g\xfcltig"}),"\n",(0,s.jsx)(n.li,{children:"Der JWT wird mit einem aus der Umgebung sicher ausgelesenen Schl\xfcssel signiert"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"weiteres-vorgehen-im-client",children:"Weiteres Vorgehen im Client"}),"\n",(0,s.jsx)(n.p,{children:"Es existieren nun zwei Cookies und ein JWT welche f\xfcr die Authentifizierung und Autorisierung der Benutzer verwendet werden.\nDiese Cookies und JWTs werden automatisch beim Verwenden der Anwendung in nachfolgenden Anfragen an das Backend verwendet,\num den Benutzer eine sichere und dennoch angenehme Benutzung der Anwendung zu erm\xf6glichen."}),"\n",(0,s.jsx)(n.p,{children:"L\xe4uft eine Session aus, bekommt der Nutzer davon nichts mit.\nAuffrischungen der Sessions und der JWTs laufen automatisiert bei jeder Anfrage mit Hilfe von Axios Interceptors ab.\nDer JWT und die Session werden im Client im LocalStorage gespeichert.\nLoggt der Benutzer sich aus, werden alle Cookies und Sessions gel\xf6scht und der LocalStorage komplett geleert."}),"\n",(0,s.jsx)(n.p,{children:"Als angemeldeter Nutzer ist es nun nicht mehr m\xf6glich die Landingseite, Anmeldeseite oder Registrierungsseite aufzurufen\nund man wird auf die Seite zur Erstellung der Notizen weitergeleitet."}),"\n",(0,s.jsx)(n.p,{children:"Ohne g\xfcltige Session oder JWT kann man lediglich die vorher genannten Seiten aufrufen, selbst mit Wissen \xfcber die URL."})]})}const g=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(o,e)})):o(e)}},3250:(e,n,i)=>{i.d(n,{Zo:()=>l,ah:()=>t});var s=i(2735);const r=s.createContext({});function t(e){const n=s.useContext(r);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const d={};function l({components:e,children:n,disableParentContext:i}){let l;return l=i?"function"==typeof e?e({}):e||d:t(e),s.createElement(r.Provider,{value:l},n)}}}]);