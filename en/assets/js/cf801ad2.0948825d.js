"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[680],{8305:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>u});var t=i(4512),r=i(3250);const s={slug:"/features/note",label:"Features",sidebar_position:5},d="Notizen",o={unversionedId:"features/note",id:"features/note",title:"Notizen",description:"Nach erfolgreicher Anmeldung ist die Kernfunktionalit\xe4t der Anwendung nun verf\xfcgbar.",source:"@site/src/features/note.mdx",sourceDirName:"features",slug:"/features/note",permalink:"/sse/en/features/note",draft:!1,unlisted:!1,editUrl:"https://github.com/clemenscodes/sse/edit/main/apps/notes/docs/src/features/note.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{slug:"/features/note",label:"Features",sidebar_position:5},sidebar:"defaultSidebar",previous:{title:"Autorisierung",permalink:"/sse/en/features/auth"},next:{title:"Suche",permalink:"/sse/en/features/search"}},a={},u=[{value:"Notizen erstellen",id:"notizen-erstellen",level:2},{value:"Sicherheitsma\xdfnahmen",id:"sicherheitsma\xdfnahmen",level:3},{value:"YouTube-Video als Anhang der Notiz",id:"youtube-video-als-anhang-der-notiz",level:2},{value:"Datenschutz",id:"datenschutz",level:3}];function l(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",ul:"ul",li:"li",code:"code"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"notizen",children:"Notizen"}),"\n",(0,t.jsx)(n.p,{children:"Nach erfolgreicher Anmeldung ist die Kernfunktionalit\xe4t der Anwendung nun verf\xfcgbar."}),"\n",(0,t.jsx)(n.h2,{id:"notizen-erstellen",children:"Notizen erstellen"}),"\n",(0,t.jsx)(n.p,{children:"Notizen k\xf6nnen nun mit Markdown oder HTML erstellt werden.\nEs steht zus\xe4tzlich eine Vorschau der Notiz zur Verf\xfcgung."}),"\n",(0,t.jsx)(n.h3,{id:"sicherheitsma\xdfnahmen",children:"Sicherheitsma\xdfnahmen"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Die Eingabe im Formular zum Erstellen der Notizen wird mit zod validert"}),"\n",(0,t.jsx)(n.li,{children:"Nur angemeldete Benutzer k\xf6nnen Notizen erstellen"}),"\n",(0,t.jsx)(n.li,{children:"Beim Erstellen wird die Benutzer-ID aus der Session entnommen und die Notiz mit dem Benutzer assoziiert"}),"\n",(0,t.jsx)(n.li,{children:"Jeglicher Inhalt der Notiz wird zun\xe4chst mit der Biblithek Showdown von Markdown zu HTML geparst"}),"\n",(0,t.jsxs)(n.li,{children:["Dabei besteht das Risiko f\xfcr ",(0,t.jsx)(n.code,{children:"XSS"}),", welches mit einer weiteren anschlie\xdfenden Parsung durch isomorphic-dompurify bereinigt wird"]}),"\n",(0,t.jsx)(n.li,{children:"Sowie im Client als auch auf dem Server wird der Payload Pipes geparst bevor die Route zum Erstellen der Notizen \xfcberhaupt erst aufgerufen wird"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"youtube-video-als-anhang-der-notiz",children:"YouTube-Video als Anhang der Notiz"}),"\n",(0,t.jsxs)(n.p,{children:["Es ist m\xf6glich der Notiz ein YouTube-Video anzuh\xe4ngen. Daf\xfcr wird der Link zu dem Video in ein Eingabefeld eingegeben.\nDieses Eingabefeld transformiert die Eingabe nun mit Hilfe von zod zu einer YouTube-Video-ID\nwelche mit einem regul\xe4ren Ausdruck ",(0,t.jsx)(n.code,{children:"([-_A-Za-z0-9]{10}[AEIMQUYcgkosw048])"})," gefiltert werden.\nBeim Erstellen der Notiz wird die YouTube-Video-ID an das Backend mitgesendet, wo wie gewohnt erneut strikt validiert wird.\nZus\xe4tzlich wird im Backend allerdings die YouTube-ID genommen und eine Anfrage an YouTube mit dieser an ",(0,t.jsx)(n.code,{children:"https://img.youtube.com/vi/${parsedVideoId}/default.jpg"}),"\ngesendet. Dies birgt das Risiko f\xfcr ",(0,t.jsx)(n.code,{children:"Serverside-Request-Forgery"}),", wird allerdings durch die strikte vorherige Validierung und Parsung mitigiert.\nDie Anfrage an YouTube erfolgt, um sicherstellen, dass die Video-ID auch zu einem YouTube-Video geh\xf6rt. Falls dem so ist, ist der Statuscode 200, falls nicht, nicht.\nIm Fehlerfall wird die Anfrage zur\xfcckgewiesen und im Client eine Fehlermeldung angezeigt.\nSomit kann deterministisch festgestellt werden, ob das Video der Notiz angehangen werden kann.\nIst die Video-ID g\xfcltig, wird diese mit der Notiz assoziiert.\nIm Client kann nun diese Video-ID aus der Notiz abgefragt werden und eine korrekte URL zu dem YouTube-Video konstruiert werden."]}),"\n",(0,t.jsx)(n.h3,{id:"datenschutz",children:"Datenschutz"}),"\n",(0,t.jsx)(n.p,{children:"Um den Datenschutz zu gew\xe4hrleisten wird f\xfcr das Einbinden von YouTube-Videos die Zwei-Klick-Methode implementiert.\nJegliches Video muss zun\xe4chst mit einem Klick best\xe4tigt werden, bevor das Video in den DOM eingebunden wird. Der Nutzer erkl\xe4rt sich somit einverstanden."})]})}const c=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)}},3250:(e,n,i)=>{i.d(n,{Zo:()=>o,ah:()=>s});var t=i(2735);const r=t.createContext({});function s(e){const n=t.useContext(r);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const d={};function o({components:e,children:n,disableParentContext:i}){let o;return o=i?"function"==typeof e?e({}):e||d:s(e),t.createElement(r.Provider,{value:o},n)}}}]);